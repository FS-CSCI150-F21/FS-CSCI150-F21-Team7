<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Registration</title>
<link rel='stylesheet' href='regstyle.css' type='text/css' />
//<script src="control.js"></script>
</head>
    
<body>
    
    <h1 class = "top"><b>Account Creation</b></h1>
    <div id="error"></div>
        <label for="userid">Username</label>
        <input type="text" id="userid" placeholder="Account Name">
        <sub>Username Must be between 5-14 characters</sub>
        
        <label for="pass">Password</label>
        <input type="password" id="pass">
        <sub>Password Must be between 5-14 characters</sub>

        Re-Enter Password
        <input type="password" id="check">
        
        <label for="email">Email</label>
        <input type="text" id="email" placeholder="user@email.com" >
        
        <label for="nm">Name</label>
        <input type="text" id ="nm">
        
        <button type="button" id="subBtn" onclick="writeUserData()">Submit</button>

        <script type="module">
            import { initializeApp } from "https://www.gstatic.com/firebasejs/9.1.3/firebase-app.js";
            import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.1.3/firebase-analytics.js";
            import {getDatabase, set, ref} from "https://www.gstatic.com/firebasejs/9.1.3/firebase-database.js";
            // TODO: Add SDKs for Firebase products that you want to use
            // https://firebase.google.com/docs/web/setup#available-libraries

            // Your web app's Firebase configuration
            // For Firebase JS SDK v7.20.0 and later, measurementId is optional
            const firebaseConfig = {
                apiKey: "AIzaSyD1PtVkndSIJKdH-IQiNq4JyQOg8efUpbY",
                authDomain: "quickstart-1593580211990.firebaseapp.com",
                databaseURL: "https://quickstart-1593580211990-default-rtdb.firebaseio.com",
                projectId: "quickstart-1593580211990",
                storageBucket: "quickstart-1593580211990.appspot.com",
                messagingSenderId: "1086555982045",
                appId: "1:1086555982045:web:82665a2f0b92d5bffdf334",
                measurementId: "G-3FLKRRNBHQ"
            };
            // Initialize Firebase
            const app = initializeApp(firebaseConfig);
            const analytics = getAnalytics(app);
            const db = getDatabase();

            function writeUserData() {
                const username = document.getElementById("userid").value;
                const password = document.getElementById("pass").value;
                const email = document.getElementById("email").value;
                const name = document.getElementById("nm").value;
                set(ref(db, 'users/'), {
                    "username": username,
                    "email": email,
                    "password": password,
                    "name": name
                });
                console.log(username);
                alert("data stored");
            }

            //document.getElementById("subBtn").addEventListener("click", writeUserData(),false);

        </script>

    <p>Existing Account?<a href="login.html">Return to Login</a></p>
</body>
</html>