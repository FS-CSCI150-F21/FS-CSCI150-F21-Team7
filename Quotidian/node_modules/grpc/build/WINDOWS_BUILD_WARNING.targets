<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <ItemGroup>
    <PropertyPageSchema Include="$(MSBuildThisFileDirectory)$(MSBuildThisFileName).xml"/>
    <AvailableItemName Include="WINDOWS_BUILD_WARNING">
      <Targets>_WINDOWS_BUILD_WARNING</Targets>
    </AvailableItemName>
  </ItemGroup>
  <UsingTask AssemblyName="Microsoft.Build.Tasks.v4.0" TaskFactory="XamlTaskFactory" TaskName="WINDOWS_BUILD_WARNING">
    <Task>$(MSBuildThisFileDirectory)$(MSBuildThisFileName).xml</Task>
  </UsingTask>
  <Target AfterTargets="$(WINDOWS_BUILD_WARNINGAfterTargets)" BeforeTargets="$(WINDOWS_BUILD_WARNINGBeforeTargets)" Condition="'@(WINDOWS_BUILD_WARNING)' != ''" DependsOnTargets="$(WINDOWS_BUILD_WARNINGDependsOn);ComputeWINDOWS_BUILD_WARNINGOutput" Inputs="%(WINDOWS_BUILD_WARNING.Identity);%(WINDOWS_BUILD_WARNING.AdditionalDependencies);$(MSBuildProjectFile)" Name="_WINDOWS_BUILD_WARNING" Outputs="%(WINDOWS_BUILD_WARNING.Outputs)">
    <ItemGroup Condition="'@(SelectedFiles)' != ''">
      <WINDOWS_BUILD_WARNING Condition="'%(Identity)' != '@(SelectedFiles)'" Remove="@(WINDOWS_BUILD_WARNING)"/>
    </ItemGroup>
    <ItemGroup>
      <WINDOWS_BUILD_WARNING_inputs Include="%(WINDOWS_BUILD_WARNING.AdditionalDependencies)"/>
    </ItemGroup>
    <ItemGroup>
      <WINDOWS_BUILD_WARNING_tlog Condition="'%(WINDOWS_BUILD_WARNING.Outputs)' != '' and '%(WINDOWS_BUILD_WARNING.ExcludedFromBuild)' != 'true'" Include="%(WINDOWS_BUILD_WARNING.Outputs)">
        <Source>@(WINDOWS_BUILD_WARNING, &apos;|&apos;)</Source>
        <Inputs>@(WINDOWS_BUILD_WARNING_inputs -&gt; &apos;%(Fullpath)&apos;, &apos;;&apos;)</Inputs>
      </WINDOWS_BUILD_WARNING_tlog>
    </ItemGroup>
    <Message Importance="High" Text="%(WINDOWS_BUILD_WARNING.ExecutionDescription)"/>
    <WriteLinesToFile Condition="'@(WINDOWS_BUILD_WARNING_tlog)' != '' and '%(WINDOWS_BUILD_WARNING_tlog.ExcludedFromBuild)' != 'true'" File="$(IntDir)$(ProjectName).write.1.tlog" Lines="^%(WINDOWS_BUILD_WARNING_tlog.Source);@(WINDOWS_BUILD_WARNING_tlog-&gt;'%(Fullpath)')"/>
    <WriteLinesToFile Condition="'@(WINDOWS_BUILD_WARNING_tlog)' != '' and '%(WINDOWS_BUILD_WARNING_tlog.ExcludedFromBuild)' != 'true'" File="$(IntDir)$(ProjectName).read.1.tlog" Lines="^%(WINDOWS_BUILD_WARNING_tlog.Source);%(WINDOWS_BUILD_WARNING_tlog.Inputs)"/>
    <WINDOWS_BUILD_WARNING AdditionalOptions="%(WINDOWS_BUILD_WARNING.AdditionalOptions)" CommandLineTemplate="%(WINDOWS_BUILD_WARNING.CommandLineTemplate)" Condition="'@(WINDOWS_BUILD_WARNING)' != '' and '%(WINDOWS_BUILD_WARNING.ExcludedFromBuild)' != 'true'" EchoOff="true" Inputs="%(WINDOWS_BUILD_WARNING.Identity)" StandardErrorImportance="High" StandardOutputImportance="High"/>
  </Target>
  <PropertyGroup>
    <ComputeLinkInputsTargets>$(ComputeLinkInputsTargets);ComputeWINDOWS_BUILD_WARNINGOutput;</ComputeLinkInputsTargets>
    <ComputeLibInputsTargets>$(ComputeLibInputsTargets);ComputeWINDOWS_BUILD_WARNINGOutput;</ComputeLibInputsTargets>
  </PropertyGroup>
  <Target Condition="'@(WINDOWS_BUILD_WARNING)' != ''" Name="ComputeWINDOWS_BUILD_WARNINGOutput">
    <ItemGroup>
      <WINDOWS_BUILD_WARNINGDirsToMake Condition="'@(WINDOWS_BUILD_WARNING)' != '' and '%(WINDOWS_BUILD_WARNING.ExcludedFromBuild)' != 'true'" Include="%(WINDOWS_BUILD_WARNING.Outputs)"/>
      <Link Condition="'%(Extension)'=='.obj' or '%(Extension)'=='.res' or '%(Extension)'=='.rsc' or '%(Extension)'=='.lib'" Include="%(WINDOWS_BUILD_WARNINGDirsToMake.Identity)"/>
      <Lib Condition="'%(Extension)'=='.obj' or '%(Extension)'=='.res' or '%(Extension)'=='.rsc' or '%(Extension)'=='.lib'" Include="%(WINDOWS_BUILD_WARNINGDirsToMake.Identity)"/>
      <ImpLib Condition="'%(Extension)'=='.obj' or '%(Extension)'=='.res' or '%(Extension)'=='.rsc' or '%(Extension)'=='.lib'" Include="%(WINDOWS_BUILD_WARNINGDirsToMake.Identity)"/>
    </ItemGroup>
    <MakeDir Directories="@(WINDOWS_BUILD_WARNINGDirsToMake-&gt;'%(RootDir)%(Directory)')"/>
  </Target>
</Project>
